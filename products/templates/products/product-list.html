{% extends 'base.html' %}
{% load query_transform %}
{% load widget_tweaks %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/products/products.css' %}">
{% endblock %}

{% block title %} Teacup Tales | All Books {% endblock %}

{% block metadesc %}
Browse through our curated collection of books at Teacup Tales. Discover fiction, non-fiction, children's books, and moreâ€”something for every reader.
{% endblock %}

{% block content %}

<div class="container-fluid">
    <div class="row justify-content-center">
        <!-- Left Column: Search Form (30% width on md screens and up, full width on smaller screens) -->
        <div class="col-md-3 col-12 mb-4">
            <!-- Include the search bar -->
            {% include 'components/search-bar.html' %}
            
            <!-- Sort By - visible only on phone screens, under the search bar -->
            <div class="d-md-none mt-3">
                {% include 'components/sort-by.html' %}
            </div>
        </div>

        <!-- Right Column: Sort By and Product Grid (70% width on md screens and up, full width on smaller screens) -->
        <div class="col-md-9 col-12">
            <!-- Sort By - visible only on larger screens -->
            <div class="d-none d-md-block mb-4">
                {% include 'components/sort-by.html' %}
            </div>

            <!-- Product Grid -->
            <div class="row">
                {% for product in products %}
                    <div class="col-lg-4 col-md-6 col-sm-12 mb-3">
                        {% include 'components/product-card.html' with product=product %}
                    </div>
                {% empty %}
                    <p>No products available.</p>
                {% endfor %}
            </div>

            <!-- Include pagination controls -->
            {% include 'includes/pagination.html' %}
        </div>
    </div>
</div>

    {% endblock %}
    
    {% block postloadjs %}
    {{ block.super }}

    <script src="{% static 'js/sort-by.js' %}"></script>

    {% endblock %}